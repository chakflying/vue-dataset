(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.VueDataset={},d.Vue))})(this,function(d,e){"use strict";const E={show:"Show",entries:"entries",previous:"Previous",next:"Next",showing:"Showing",showingTo:"to",showingOf:"of",showingEntries:"entries"},k="...";function x(n,a,s){let t;return function(){const r=this,l=arguments;clearTimeout(t),s&&!t&&n.apply(r,l),t=setTimeout(function(){t=null,s||n.apply(r,l)},a)}}function P(n){for(const a in n)return!1;return!0}function I(n,a){const t=[],r=[];let l;if(t.push(1),n<=1)return t;for(let o=a-2;o<=a+2;o++)o<n&&o>1&&t.push(o);t.push(n);for(let o=0;o<t.length;o++)l&&(t[o]-l===2?r.push(l+1):t[o]-l!==1&&r.push(k)),r.push(t[o]),l=t[o];return r}function C(n,a={}){const s=[];let t;const r=n.length;return n=n.map(function(l,o){return l[0]==="-"?(s[o]=-1,l=l.substring(1)):s[o]=1,l}),function(l,o){for(t=0;t<r;t++){const i=n[t],f=a[i]?a[i](l.value[i]):l.value[i],u=a[i]?a[i](o.value[i]):o.value[i];if(f>u)return s[t];if(f<u)return-s[t]}return 0}}function N(n,a){for(const s in a)n=n.filter(function(t){const r=t.value;for(const l in r)if(l===s){if(typeof a[s]=="function")return a[s](r[l]);if(a[s]===""||r[l]===a[s])return!0}return!1});return n}function B(n,a,s,t){t=String(t).toLowerCase();for(const r in s)if(n.length===0||n.indexOf(r)!==-1){const l=String(s[r]).toLowerCase();for(const o in a)if(o===r&&typeof a[o]=="function"){const i=a[o](l,t,s);if(i===!0)return i}if(l.indexOf(t)>=0)return!0}return!1}const h=(n,a)=>{const s=n.__vccOpts||n;for(const[t,r]of a)s[t]=r;return s},j={props:{dsData:{type:Array,default:()=>[]},dsFilterFields:{type:Object,default:()=>({})},dsSortby:{type:Array,default:()=>[]},dsSearchIn:{type:Array,default:()=>[]},dsSearchAs:{type:Object,default:()=>({})},dsSortAs:{type:Object,default:()=>({})}},setup(n){const a=e.ref(1),s=e.ref(""),t=e.ref(10),r=e.ref(E),l=e.ref([]),o=g=>{s.value=g},i=async g=>{t.value=g,await e.nextTick(),a.value>w.value&&f(y.value[y.value.length-1])},f=g=>{a.value=g},u=e.computed(()=>(n.dsData,s.value,n.dsSortby,n.dsFilterFields,n.dsSearchIn,n.dsSearchAs,n.dsSortAs,Date.now())),D=e.computed(()=>l.value.slice(_.value,p.value)),y=e.computed(()=>I(w.value,a.value)),S=e.computed(()=>l.value.length),w=e.computed(()=>Math.ceil(S.value/t.value)),_=e.computed(()=>(a.value-1)*t.value),p=e.computed(()=>a.value*t.value);return e.watch(S,(g,se)=>{f(1)}),e.watch(u,(g,se)=>{let c=[];!s.value&&!n.dsSortby.length&&P(n.dsFilterFields)?c=n.dsData.map((m,b)=>b):(c=n.dsData.map((m,b)=>({index:b,value:m})),P(n.dsFilterFields)||(c=N(c,n.dsFilterFields)),s.value&&(c=c.filter(m=>B(n.dsSearchIn,n.dsSearchAs,m.value,s.value))),n.dsSortby.length&&c.sort(C(n.dsSortby,n.dsSortAs)),c=c.map(m=>m.index)),l.value=c},{immediate:!0}),e.provide("dsIndexes",l),e.provide("search",o),e.provide("showEntries",i),e.provide("setActive",f),e.provide("datasetI18n",r),e.provide("dsData",e.computed(()=>n.dsData)),e.provide("dsRows",D),e.provide("dsPages",y),e.provide("dsResultsNumber",S),e.provide("dsPagecount",w),e.provide("dsFrom",_),e.provide("dsTo",p),e.provide("dsPage",a),{dsIndexes:l,dsShowEntries:t,dsResultsNumber:S,dsPage:a,dsPagecount:w,dsFrom:_,dsTo:p,dsRows:D,dsPages:y,search:o,showEntries:i,setActive:f}}};function F(n,a,s,t,r,l){return e.renderSlot(n.$slots,"default",{ds:{dsIndexes:t.dsIndexes,dsShowEntries:t.dsShowEntries,dsResultsNumber:t.dsResultsNumber,dsPage:t.dsPage,dsPagecount:t.dsPagecount,dsFrom:t.dsFrom,dsTo:t.dsTo,dsData:s.dsData,dsRows:t.dsRows,dsPages:t.dsPages,search:t.search,showEntries:t.showEntries,setActive:t.setActive}})}const R=h(j,[["render",F]]),T={setup(){const n=e.inject("dsResultsNumber"),a=e.inject("dsFrom"),s=e.inject("dsTo"),t=e.computed(()=>n.value!==0?a.value+1:0),r=e.computed(()=>s.value>=n.value?n.value:s.value);return{datasetI18n:e.inject("datasetI18n"),dsResultsNumber:n,showing:t,showingTo:r}}};function A(n,a,s,t,r,l){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.datasetI18n.showing)+" "+e.toDisplayString(t.showing)+" "+e.toDisplayString(t.datasetI18n.showingTo)+" "+e.toDisplayString(t.showingTo)+" "+e.toDisplayString(t.datasetI18n.showingOf)+" "+e.toDisplayString(t.dsResultsNumber)+" "+e.toDisplayString(t.datasetI18n.showingEntries),1)}const V=h(T,[["render",A]]),L={props:{tag:{type:String,default:"div"}},setup(){const n=e.computed(()=>{const a=[];for(let s=e.inject("dsFrom").value;s<e.inject("dsTo").value;s++)a.push(s);return a});return{dsData:e.inject("dsData"),dsRows:e.inject("dsRows"),indexes:n}}};function O(n,a,s,t,r,l){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(s.tag),null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.dsRows,(o,i)=>e.renderSlot(n.$slots,"default",{row:t.dsData[o],rowIndex:o,index:t.indexes[i]})),256)),t.dsRows.length?e.createCommentVNode("",!0):e.renderSlot(n.$slots,"noDataFound",{key:0})]),_:3})}const z=h(L,[["render",O]]),M={props:{pageLinkClass:{type:String,default:""}},setup(){const n=e.ref(k),a=e.inject("dsPage"),s=e.inject("dsPagecount"),t=e.computed(()=>a.value===1),r=e.computed(()=>a.value===s.value||s.value===0);return{datasetI18n:e.inject("datasetI18n"),setActive:e.inject("setActive"),dsPages:e.inject("dsPages"),dsPagecount:s,dsPage:a,morePages:n,disabledPrevious:t,disabledNext:r}}},K={class:"pagination"},q=["tabindex","aria-disabled"],G=["onClick"],W=["tabindex","aria-disabled"];function H(n,a,s,t,r,l){return e.openBlock(),e.createElementBlock("ul",K,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",t.disabledPrevious&&"disabled"])},[e.createElementVNode("a",{class:e.normalizeClass(["page-link",s.pageLinkClass]),href:"#",tabindex:t.disabledPrevious?"-1":null,"aria-disabled":t.disabledPrevious?"true":null,onClick:a[0]||(a[0]=e.withModifiers(o=>t.setActive(t.dsPage!==1&&t.dsPagecount!==0?t.dsPage-1:t.dsPage),["prevent"]))},e.toDisplayString(t.datasetI18n.previous),11,q)],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.dsPages,(o,i)=>(e.openBlock(),e.createElementBlock("li",{key:i,class:e.normalizeClass(["page-item",o===t.dsPage&&"active",o===t.morePages&&"disabled"])},[o!==t.morePages?(e.openBlock(),e.createElementBlock("a",{key:0,class:e.normalizeClass(["page-link",s.pageLinkClass]),href:"#",onClick:e.withModifiers(f=>t.setActive(o),["prevent"])},e.toDisplayString(o),11,G)):(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(["page-link",s.pageLinkClass])},e.toDisplayString(o),3))],2))),128)),e.createElementVNode("li",{class:e.normalizeClass(["page-item",t.disabledNext&&"disabled"])},[e.createElementVNode("a",{class:e.normalizeClass(["page-link",s.pageLinkClass]),href:"#",tabindex:t.disabledNext?"-1":null,"aria-disabled":t.disabledNext?"true":null,onClick:a[1]||(a[1]=e.withModifiers(o=>t.setActive(t.dsPage!==t.dsPagecount&&t.dsPagecount!==0?t.dsPage+1:t.dsPage),["prevent"]))},e.toDisplayString(t.datasetI18n.next),11,W)],2)])}const J=h(M,[["render",H]]),Q={props:{dsSearchPlaceholder:{type:String,default:""},wait:{type:Number,default:0}},setup(n){const a=e.inject("search"),s=e.ref(""),t=x(r=>{a(r)},n.wait);return{dsSearch:s,input:t}}},U=["placeholder","value"];function X(n,a,s,t,r,l){return e.openBlock(),e.createElementBlock("input",{type:"text",placeholder:s.dsSearchPlaceholder,class:"form-input",value:t.dsSearch,onInput:a[0]||(a[0]=o=>t.input(o.target.value))},null,40,U)}const Y=h(Q,[["render",X]]),Z={props:{selectClass:{type:String,default:""},dsShowEntries:{type:Number,default:10},dsShowEntriesLovs:{type:Array,default:()=>[{value:10,text:10},{value:25,text:25},{value:50,text:50},{value:100,text:100}]}},emits:["changed"],setup(n,{emit:a}){const s=e.inject("showEntries"),t=r=>{a("changed",Number(r.target.value)),s(Number(r.target.value))};return s(Number(n.dsShowEntries)),{datasetI18n:e.inject("datasetI18n"),change:t}}},v={class:"form-inline"},$=["value"],ee=["value"];function te(n,a,s,t,r,l){return e.openBlock(),e.createElementBlock("div",v,[e.createElementVNode("label",null,e.toDisplayString(t.datasetI18n.show),1),e.createElementVNode("select",{value:s.dsShowEntries,class:e.normalizeClass(["form-input",s.selectClass]),onChange:a[0]||(a[0]=(...o)=>t.change&&t.change(...o))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.dsShowEntriesLovs,o=>(e.openBlock(),e.createElementBlock("option",{key:o.value,value:o.value},e.toDisplayString(o.text),9,ee))),128))],42,$),e.createElementVNode("label",null,e.toDisplayString(t.datasetI18n.entries),1)])}const ne=h(Z,[["render",te]]);d.Dataset=R,d.DatasetInfo=V,d.DatasetItem=z,d.DatasetPager=J,d.DatasetSearch=Y,d.DatasetShow=ne,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
